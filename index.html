<!DOCTYPE html>
<html lang="ko">
<head>
  <!-- [01] HEAD & META 기본 -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title><!-- [TXT-02: 문서 타이틀] -->NO열정페이 채용/작업 (Beta)</title>
  <meta name="description" content="<!-- [TXT-03: 문서 설명] -->성과 기반(수익셰어/보너스) 채용/작업 공고를 탐색하세요." />

  <!-- [01-1] 외부 스크립트(Tailwind, Ads 등) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2824624880449066" crossorigin="anonymous"></script>

  <!-- [02] 전역 CSS (빌드 없이 동작) -->
  <style>
    body{ background:#fafafa; }
    .container{ max-width:1200px; }
    .btn{ display:inline-flex; align-items:center; justify-content:center; border-radius:0.75rem; padding:0.5rem 0.75rem; font-size:0.875rem; font-weight:600; }
    .btn-primary{ background:#e11d48; color:#fff; } .btn-primary:hover{ background:#be123c; }
    .btn-ghost{ border:1px solid #e5e7eb; background:#fff; } .btn-ghost:hover{ background:#f9fafb; }
    .tag{ border:1px solid #e5e7eb; border-radius:9999px; padding:4px 8px; font-size:12px; }
    .tag:hover{ background:#f9fafb; }
    .line-clamp-2{ display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden; }
  </style>

  <!-- [03] 관리자 설정 로더(localStorage) -->
  <script>
    // [VAR-01] 관리자 설정이 저장되는 키
    const NOYP_CFG_KEY = 'noyp_config_v1';
    function getAdminCfg(){
      try { return JSON.parse(localStorage.getItem(NOYP_CFG_KEY) || '{}'); }
      catch(e){ return {}; }
    }
  </script>
</head>
<body class="text-gray-900">

  <!-- [04] 상단 헤더/내비게이션 -->
  <header class="sticky top-0 z-40 border-b bg-white/90 backdrop-blur">
    <div class="container mx-auto px-4 h-16 flex items-center justify-between">
      <div class="flex items-center gap-4">
        <a href="#" class="text-xl font-extrabold">
          <!-- [TXT-01: 워드마크] -->NO<span class="text-rose-600">열정페이</span>.COM
        </a>
        <nav class="hidden md:flex items-center gap-5 text-sm text-gray-600">
          <a href="#" class="hover:text-rose-600"><!-- [TXT-04a] -->채용/작업</a>
          <a href="#" class="hover:text-rose-600"><!-- [TXT-04b] -->상단고정(안내)</a>
          <a href="#guide" class="hover:text-rose-600"><!-- [TXT-04c] -->안전가이드</a>
        </nav>
      </div>
      <div class="flex items-center gap-2">
        <button id="btn-login" class="btn btn-ghost"><!-- [TXT-04e] -->로그인</button>
        <button id="btn-logout" class="btn btn-primary hidden"><!-- [TXT-04f] -->로그아웃</button>
        <a href="#post" class="hidden sm:inline-flex btn btn-primary"><!-- [TXT-04g] -->공고 등록</a>
      </div>
    </div>
  </header>

  <!-- [05] 상단 검색바 -->
  <section class="border-b bg-white">
    <div class="container mx-auto px-4 py-4">
      <div class="grid md:grid-cols-12 gap-3">
        <div class="md:col-span-5">
          <input id="q" type="text" class="w-full rounded-xl border px-3 py-2"
                 placeholder="<!-- [TXT-05a: 검색 placeholder] -->키워드 (예: 프론트엔드, 영상편집, React)">
        </div>
        <div class="md:col-span-2">
          <select id="loc" class="w-full rounded-xl border px-3 py-2">
            <option value=""><!-- [TXT-05b] -->지역(전체)</option>
            <option>서울</option><option>부산</option><option>대구</option><option>경기</option><option>온라인</option>
          </select>
        </div>
        <div class="md:col-span-2">
          <select id="cat" class="w-full rounded-xl border px-3 py-2">
            <option value=""><!-- [TXT-05c] -->분류(전체)</option>
            <option>개발</option><option>디자인</option><option>영상/콘텐츠</option>
            <option>마케팅/세일즈</option><option>운영/CS</option>
          </select>
        </div>
        <div class="md:col-span-2">
          <select id="reward" class="w-full rounded-xl border px-3 py-2">
            <option value=""><!-- [TXT-05d] -->보상(전체)</option>
            <option value="share">수익셰어</option><option value="bounty">건당 보너스</option><option value="hybrid">하이브리드</option>
          </select>
        </div>
        <div class="md:col-span-1">
          <button id="btn-search" class="w-full btn btn-primary"><!-- [TXT-05e] -->검색</button>
        </div>
      </div>
      <div class="mt-3 flex flex-wrap gap-2 text-xs">
        <!-- [05-1] 추천 태그 -->
        <button class="tag" data-q="재택">#재택</button>
        <button class="tag" data-q="단기">#단기</button>
        <button class="tag" data-q="장기">#장기</button>
        <button class="tag" data-q="디자인">#디자인</button>
        <button class="tag" data-q="React">#React</button>
      </div>
    </div>
  </section>

  <!-- [06] 메인 리스트/페이지네이션 -->
  <main class="container mx-auto px-4 py-6 grid md:grid-cols-12 gap-6">
    <section class="md:col-span-9">
      <div class="mb-3 flex items-center justify-between text-sm text-gray-600">
        <div><span id="result-count">0</span><!-- [TXT-06a] -->건의 공고</div>
        <div class="flex items-center gap-2">
          <label><!-- [TXT-06b] -->정렬</label>
          <select id="sort" class="rounded-lg border px-2 py-1">
            <option value="recent"><!-- [TXT-06c] -->최신순</option>
          </select>
        </div>
      </div>
      <div id="list" class="grid gap-3"><!-- [06-1] 공고 카드가 여기에 채워짐 --></div>
      <div class="mt-4 flex items-center justify-center gap-2">
        <button id="prev" class="btn btn-ghost"><!-- [TXT-06d] -->이전</button>
        <span id="page" class="text-sm text-gray-600">1</span>
        <button id="next" class="btn btn-ghost"><!-- [TXT-06e] -->다음</button>
      </div>
    </section>

    <!-- [07] 사이드바 -->
    <aside class="md:col-span-3 space-y-3">
      <div class="rounded-2xl border bg-white p-4">
        <h3 class="font-bold"><!-- [TXT-07a] -->카테고리</h3>
        <div class="mt-2 grid grid-cols-2 gap-2 text-sm">
          <button class="tag" data-cat="개발">개발</button>
          <button class="tag" data-cat="디자인">디자인</button>
          <button class="tag" data-cat="영상/콘텐츠">영상/콘텐츠</button>
          <button class="tag" data-cat="마케팅/세일즈">마케팅/세일즈</button>
          <button class="tag" data-cat="운영/CS">운영/CS</button>
          <button class="tag" data-cat="">전체</button>
        </div>
      </div>

      <div class="rounded-2xl border bg-white p-4" id="recent-box">
        <h3 class="font-bold"><!-- [TXT-07b] -->최근 본 공고</h3>
        <div id="recent" class="mt-2 space-y-2 text-sm text-gray-700"><!-- [07-1] 최근 본 공고 목록 --></div>
      </div>

      <div class="rounded-2xl border bg-white p-4" id="guide">
        <h3 class="font-bold"><!-- [TXT-07c] -->안전/가이드</h3>
        <ul class="mt-2 list-disc list-inside text-sm text-gray-700">
          <li><!-- [TXT-07d] -->수익셰어 %/캡/지급 트리거 필수</li>
          <li><!-- [TXT-07e] -->무급 상시근로 대체 불가</li>
          <li><!-- [TXT-07f] -->분쟁 예방: 전자서명/증빙 보관</li>
        </ul>
      </div>
    </aside>
  </main>

  <!-- [08] 상세 모달 -->
  <div id="modal" class="fixed inset-0 hidden items-center justify-center bg-black/40 p-4">
    <div class="w-full max-w-2xl rounded-2xl bg-white p-6">
      <div class="flex items-start justify-between">
        <h3 id="modal-title" class="text-lg font-bold"><!-- [TXT-08a] -->상세 제목</h3>
        <button id="modal-close" class="text-gray-500"><!-- [TXT-08b] -->닫기</button>
      </div>
      <div id="modal-body" class="mt-3 text-sm text-gray-700"><!-- [08-1] 상세 본문 --></div>
      <div class="mt-4 flex items-center justify-end gap-2">
        <button id="btn-apply" class="btn btn-primary"><!-- [TXT-08c] -->지원 문의</button>
      </div>
    </div>
  </div>

  <!-- [09] 푸터 -->
  <footer class="mt-10 border-t bg-white">
    <div class="container mx-auto px-4 py-8 text-sm text-gray-600 grid md:grid-cols-2 gap-4">
      <div>
        <div class="font-extrabold"><!-- [TXT-09a] -->NO열정페이.COM</div>
        <p class="mt-2"><!-- [TXT-09b] -->성과 기반 작업 매칭을 빠르게 시작하세요 (베타)</p>
      </div>
      <div class="md:text-right space-x-4">
        <button id="open-support" class="btn btn-ghost"><!-- [TXT-09c] -->후원 안내</button>
        <a href="#guide" class="hover:text-rose-700"><!-- [TXT-09d] -->이용약관(안내)</a>
        <a href="#guide" class="hover:text-rose-700"><!-- [TXT-09e] -->개인정보처리방침(안내)</a>
        <span class="text-gray-400">© <!-- [TXT-09f] -->2025</span>
      </div>
    </div>
  </footer>

  <!-- [10] 상단 공지 배너 로더 + 관리자 override -->
  <script>
    (async () => {
      const cfg = getAdminCfg();
      try {
        const r = await fetch('announcements.json', { cache: 'no-store' });
        if(!r.ok) return;
        const d = await r.json();
        const items = (d && Array.isArray(d.items)) ? d.items.filter(x=>x.published) : [];
        const a = items[0] || { title: '' };
        if(cfg.annTitle) a.title = cfg.annTitle; // [TXT-10a] 관리자에서 입력한 공지 제목
        if(!a.title) return;

        const wrap = document.createElement('div');
        wrap.className = 'sticky top-0 z-40';
        wrap.innerHTML = `
          <div class="bg-amber-100 text-amber-900 border-b border-amber-200">
            <div class="container mx-auto px-4 py-2 text-sm flex items-center justify-between">
              <div class="truncate"><strong class="mr-2">공지</strong>${escapeHtml(a.title)}</div>
              <button onclick="this.closest('div.bg-amber-100').remove();">닫기</button>
            </div>
          </div>`;
        document.body.prepend(wrap);

        function escapeHtml(s){return String(s||'').replace(/[&<>\"']/g,c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#39;'}[c]));}
      } catch(e){ /* silent */ }
    })();
  </script>

  <!-- [11] 후원 팝업(오늘 하루 이 창을 열지 않음) - 마크업 -->
  <div id="support-popup" class="fixed inset-0 z-50 hidden items-center justify-center bg-black/50 p-4">
    <div class="w-full max-w-md rounded-2xl bg-white shadow-lg overflow-hidden">
      <div class="px-5 py-4 border-b">
        <h3 id="support-title" class="text-lg font-bold">
          <!-- [TXT-11a: 팝업 제목 기본] -->[알림] NO열정페이 운영 후원 안내
        </h3>
      </div>
      <div id="support-body" class="px-5 py-4 text-sm text-gray-700 space-y-2">
        <!-- [TXT-11b: 팝업 본문 HTML] -->
        <p>공정한 보상을 위한 커뮤니티 프로젝트 <strong>NO열정페이</strong>를 응원해 주세요. 서버/도메인/개발 유지비에 큰 힘이 됩니다.</p>
        <ul class="list-disc list-inside text-gray-700">
          <li>후원금은 운영비로만 사용되며, 정산 내역을 투명하게 공개합니다.</li>
          <li>정기/일시 후원 모두 환영합니다.</li>
        </ul>
      </div>
      <div class="px-5 pb-4 flex items-center justify-between">
        <div class="flex items-center gap-2 text-xs text-gray-600">
          <input type="checkbox" id="support-hide-today" class="rounded border-gray-300">
          <label for="support-hide-today"><!-- [TXT-11c] -->오늘 하루 이 창을 열지 않음</label>
        </div>
        <div class="flex items-center gap-2">
          <a id="support-donate" href="#" class="btn btn-primary"><!-- [TXT-11d] -->후원하기</a>
          <button id="support-close" class="btn btn-ghost"><!-- [TXT-11e] -->닫기</button>
        </div>
      </div>
    </div>
  </div>

  <!-- [12] 후원 팝업 스크립트 -->
  <script>
    (function(){
      // [VAR-02] 팝업 숨김 유지 키 & 기간
      const POPUP_KEY = 'supportPopupHideUntil';
      const DAY_MS = 24*60*60*1000;

      // [VAR-03] 기본 후원 링크(관리자에서 덮어씀)
      let donationUrl = '#';

      const cfg = getAdminCfg();
      const pop = document.getElementById('support-popup');
      const openBtn = document.getElementById('open-support');
      const closeBtn = document.getElementById('support-close');
      const donateBtn = document.getElementById('support-donate');
      const hideToday = document.getElementById('support-hide-today');
      const titleEl = document.getElementById('support-title');
      const bodyEl  = document.getElementById('support-body');

      // [12-1] 관리자 값 반영
      if(cfg.donationUrl) donationUrl = cfg.donationUrl;
      if(cfg.supportTitle) titleEl.textContent = cfg.supportTitle;
      if(cfg.supportBodyHtml) bodyEl.innerHTML = cfg.supportBodyHtml;
      donateBtn.setAttribute('href', donationUrl);

      // [12-2] 표시/숨김 유틸
      function show(){ pop.classList.remove('hidden'); pop.classList.add('flex'); }
      function hide(){ pop.classList.add('hidden'); pop.classList.remove('flex'); }
      function shouldShow(){
        const until = parseInt(localStorage.getItem(POPUP_KEY)||'0',10) || 0;
        return Date.now() > until;
      }
      function closeAndMaybeHideToday(){
        if(hideToday.checked){
          localStorage.setItem(POPUP_KEY, String(Date.now() + DAY_MS));
        }
        hide();
      }

      // [12-3] 초기 표시 & 이벤트
      if(shouldShow()) { show(); }
      openBtn?.addEventListener('click', show);
      closeBtn?.addEventListener('click', closeAndMaybeHideToday);
      document.addEventListener('keydown', (e)=>{ if(e.key==='Escape' && !pop.classList.contains('hidden')) closeAndMaybeHideToday(); });
      pop.addEventListener('click', (e)=>{ if(e.target===pop) closeAndMaybeHideToday(); });
    })();
  </script>

  <!-- [13] 안전/가이드(본문 섹션) -->
  <section id="guide" class="max-w-3xl mx-auto px-4 py-8">
    <h2 class="text-xl font-bold"><!-- [TXT-13a] -->안전/가이드</h2>
    <p class="mt-2 text-gray-700"><!-- [TXT-13b] -->
      본 플랫폼은 구인·구직 당사자가 자율적으로 계약을 체결하도록 돕는 중개 도구입니다. 계약의 법적 효력과 책임은 당사자에게 귀속됩니다.
    </p>
    <h3 class="mt-4 font-semibold"><!-- [TXT-13c] -->계약서 작성 시 주의</h3>
    <ul class="list-disc list-inside text-gray-700">
      <li><!-- [TXT-13d] -->반드시 <strong>서면 계약</strong>으로 체결 (구두합의 지양)</li>
      <li><!-- [TXT-13e] -->근로형태/역할/책임/보수/지급시기/분쟁절차 명시</li>
      <li><!-- [TXT-13f] -->개인정보 보호 및 관련 법령(근로기준법·민법·상법 등) 준수</li>
    </ul>
    <h3 class="mt-4 font-semibold"><!-- [TXT-13g] -->수익 분배 가이드</h3>
    <ul class="list-disc list-inside text-gray-700">
      <li><!-- [TXT-13h] -->시작 전 <strong>비율·기준</strong> 합의(기여도·위험·자본 반영)</li>
      <li><!-- [TXT-13i] -->지분/매출쉐어/성과보너스 구조 명확화, 정산 근거 보관</li>
    </ul>
    <h3 class="mt-4 font-semibold"><!-- [TXT-13j] -->법적 고지</h3>
    <p class="text-gray-700"><!-- [TXT-13k] -->
      플랫폼은 표준계약서·가이드·법률상담 연계를 제공할 수 있으나 계약 당사자는 아닙니다. 분쟁 시 중재/조정/소송 절차를 사용할 수 있습니다.
    </p>
  </section>

  <!-- [14] 인라인 JS 스텁(태그 클릭/검색 데모) -->
  <script>
    (function(){
      const $ = (s, r=document)=>r.querySelector(s);
      const $$= (s, r=document)=>Array.from(r.querySelectorAll(s));
      $$('.tag[data-q]').forEach(el=>{
        el.addEventListener('click', ()=>{
          const q=$('#q'); if(q) q.value = el.dataset.q || '';
        });
      });
      $('#btn-search')?.addEventListener('click', ()=>{
        alert('검색 데모: 실제 데이터 연동 전입니다.');
      });
    })();
  </script>

</body>
</html>
